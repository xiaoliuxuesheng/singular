# 第八章 装饰器

## 8.1 装饰器概述

### 1. 介绍

- 装饰器是一种特殊的类型声明, 可以附加到类声明, 方法, 属性 和 参数 上 : **修改类型的行为**
- 装饰器的本质是一个方法(function) : 在构造对象时候, 执行装饰器对应的方法

### 2.装饰器的格式

- **普通装饰器** : 不可以给装饰器传参数

    ```js
    // 定义装饰器
        function 装饰器名称(target) {
            // target : 表示当前类的构造函数
        }
    
    // 使用装饰器
    	@装饰器名称
    ```

    > 普通装饰器只有一个参数 : 这个参数表示被当前装饰器标注的成员所在的类

- **装饰器工厂** : 可以给装饰器传参数

    ```js
    // 定义装饰器工厂
    	function 装饰器名称(value: string) { 	// 这是一个装饰器工厂
            return function (target) { 		   // 这是装饰器
                // target : 表示当前类的构造函数
            }
        }
    
    // 使用装饰器工厂
    	@装饰器名称
    ```

    > 装饰器工厂接收参数 : 可以给装饰器使用
    >
    > 装饰器工厂返回一个表达式，以供装饰器在运行时调用

### 3. 装饰器分类

- 类装饰器
- 属性装饰器
- 方法装饰器
- 参数装饰器

### 4. 装饰器的执行顺序

- **属性装饰器 > 方法装饰器 > 参数装饰器 > 类装饰器**

    > 同类型同层次的装饰器是**从后向前执行**

## 8.2 类装饰器

- 类装饰器函数在运行时候当前函数被调用,类的构造函数作为其唯一参数

    ```js
    // 普通装饰器
    	function 装饰器名称(target:any){
            // TUDO
        }
    
    // 装饰器工厂
        function 装饰器名称(参数名称: string) {
            return function (target: any) {
                // target : 类构造函数
            }
        }
    ```

## 8.3 属性装饰器

- *属性装饰器*声明在一个属性声明之前

- 属性装饰器表达式会在运行时当作函数被调用，传入下列2个参数：
    1. 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。
    2. 成员的名字。

## 8.4 方法装饰器

- *方法装饰器*声明在一个方法的声明之前 : 可以用来监视，修改或者替换方法定义
- 方法装饰器表达式会在运行时当作函数被调用，传入下列3个参数：
    1. 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。
    2. 成员的名字。
    3. 成员的*属性描述符*

## 8.5 参数装饰器

- 参数装饰器表达式会在运行时当作函数被调用，传入下列3个参数：
    1. 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。
    2. 成员的名字。
    3. 参数在函数参数列表中的索引。

