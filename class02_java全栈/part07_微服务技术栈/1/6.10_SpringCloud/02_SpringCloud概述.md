# 第二章 SpringCloud概述

## 2.1 SpringCloud与微服务

- SpringCloud技术栈为微服务提供了整体解决方案
- 完整的微服务架构标准

## 2.2 SpringCloud与SpringBoot

- SpringBoot 
  - Spring Boot就是整合了框架的框架，它让一切依赖都变得有序简单
  - Spring Boot的核心思想就是约定大于配置，一切由内定的约束来自动完成
  - 提供的全新框架,其设计目的是用来简化新 Spring应用的初始搭建以及开发过程
- SpringCloud
  - Spring Cloud是一套分布式服务治理的框架
  - 它本身不会提供具体功能性的操作，更专注于服务之间的通讯、熔断、监控等。
  - 微服务是可以独立部署、水平扩展、独立访问的服务单元， Spring Cloud就是这些微服务的大管家

## 2.3 SpringCloud技术栈

### ▲ 默默无闻服务

>  融合在每个微服务中、依赖其它组件并为其提供服务。

- **Ribbon**，客户端负载均衡，特性有区域亲和、重试机制。
- **Hystrix**，客户端容错保护，特性有服务降级、服务熔断、请求缓存、请求合并、依赖隔离。
- **Feign**，声明式服务调用，本质上就是Ribbon+Hystrix
- **Stream**，消息驱动，有Sink、Source、Processor三种通道，特性有订阅发布、消费组、消息分区。
- **Bus**，消息总线，配合Config仓库修改的一种Stream实现，
- **Sleuth**，分布式服务追踪，需要搞清楚TraceID和SpanID以及抽样，如何与ELK整合。

### ▲ 利刃独挑大梁

>  独自启动不需要依赖其它组件，单枪匹马都能干。

- **Eureka**，服务注册中心，特性有失效剔除、服务保护。
- **Dashboard**，Hystrix仪表盘，监控集群模式和单点模式，其中集群模式需要收集器Turbine配合。
- **Zuul**，API服务网关，功能有路由分发和过滤。
- **Config**，分布式配置中心，支持本地仓库、SVN、Git、Jar包内配置等模式，

###▲ 各司其职

> 每个组件都不是平白无故的产生的，是为了解决某一特定的问题而存在。

- **Eureka**和**Ribbon**，是最基础的组件，一个注册服务，一个消费服务。
- **Hystrix**为了优化**Ribbon**、防止整个微服务架构因为某个服务节点的问题导致崩溃，是个保险丝的作用。
- **Dashboard**给Hystrix统计和展示用的，而且监控服务节点的整体压力和健康情况。
- **Turbine**是集群收集器，服务于Dashboard的。
- **Feign**是方便我们程序员些更优美的代码的。
- **Zuul**是加在整个微服务最前沿的防火墙和代理器，隐藏微服务结点IP端口信息，加强安全保护的。
- **Config**是为了解决所有微服务各自维护各自的配置，设置一个同意的配置中心，方便修改配置的。
- **Bus**是因为config修改完配置后各个结点都要refresh才能生效实在太麻烦，所以交给bus来通知服务节点刷新配置的。
- **Stream**是为了简化研发人员对MQ使用的复杂度，弱化MQ的差异性，达到程序和MQ松耦合。
- **Sleuth**是因为单次请求在微服务节点中跳转无法追溯，解决任务链日志追踪问题的。

