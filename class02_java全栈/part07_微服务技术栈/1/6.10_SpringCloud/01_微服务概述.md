# 第一章 微服务概述

## 1.1 微服务

- 将软件应用程序设计为可独立部署的服务套件的特定方式,一种架构风格
- 将功能多样复杂的单一应用拆分为多个独立的且功能单一的单独的应用,并且整体功能完整

## 1.2 微服务架构

- 微服务架构是一种将单应用程序作为一套小型服务开发的方法，每种应用程序都在其自己的进程中运行
- 并与轻量级机制（通常是HTTP资源的API）进行通信
- 可以用不同的编程语言编写，并使用不同的数据存储技术。

## 1.3 微服务的优缺点

### 1. 优点

- 每个微服务都很小，这样能聚焦一个指定的业务功能或业务需求。
- 微服务能够被小团队单独开发，这个小团队是2到5人的开发人员组成。
- 微服务是松耦合的，是有功能意义的服务，无论是在开发阶段或部署阶段都是独立的。
- 微服务能使用不同的语言开发。
- 微服务易于被一个开发人员理解，修改和维护，这样小团队能够更关注自己的工作成果。无需通过合作才能体现价值。
- 微服务允许你利用融合最新技术。
- 微服务只是业务逻辑的代码，不会和HTML,CSS 或其他界面组件混合。

### 2. 缺点

- 微服务架构可能带来过多的操作。
- 需要DevOps技巧 
- 可能双倍的努力。
- 分布式系统可能复杂难以管理。
- 因为分布部署跟踪问题难。
- 当服务数量增加，管理复杂性增加。

## 1.4 微服务技术栈

### 1. 服务发现

| 技术      | 描述                                                         |
| --------- | ------------------------------------------------------------ |
| Consul    | HashiCorp公司推出的开源工具，用于实现分布式系统的服务发现与配置 |
| Zookeeper | 一个分布式的，开放源码的分布式应用程序协调服务               |
| Eureka    | Netflix开源一个RESTful服务，用来定位运行在AWS域（Region）中的中间层服务 |

### 2. 部署

| 技术   | 描述                                         |
| ------ | -------------------------------------------- |
| GoCD   | 开源持续交付工具                             |
| Docker | 是一个开源的应用容器引擎                     |
| Chef   | 一个系统集成框架，为整个架构提供配置管理功能 |
| puppet | 一个开源的软件自动化配置和部署工具           |

### 3. 测试

| 技术       | 描述                                                       |
| ---------- | ---------------------------------------------------------- |
| mountebank | 微服务测试打桩/mock工具 Selenium Grid：Web应用程序测试工具 |
| Pact       | 消费者驱动测试工具                                         |
| pacto      | ThoughtWorks开源消费者驱动测试工具                         |

### 4.监控

| 技术               | Nagios：网络监视工具                                         |
| ------------------ | ------------------------------------------------------------ |
| logstash           | 一个应用程序日志、事件的传输、处理、管理和搜索的平台         |
| flume              | 一个分布式、可靠、和高可用的海量日志聚合的系统**(推荐)**     |
| Kibana             | 基于ElasticSearch查看日志系统                                |
| SSH multiplexing   | 检索日志                                                     |
| Graphite           | 是一个用于采集网站实时信息并进行统计的开源项目，可用于采集多种网站服务运行状态信息 |
| collectd           | 是一个守护(daemon)进程，用来收集系统性能和提供各种存储方式来存储不同值的机制 |
| dropwizard/metrics | 运行在JVM上的库，允许你存储一些指标，如计数器、计时器或计量表等 |
| Zipkin             | 分布式跟踪系，Zipkin有点重量级                               |
| Hystrix            | 就是处理依赖隔离的java库，该库旨在通过控制那些访问远程系统、服务和第三方库的节点，从而对延迟和故障提供更强大的容错能力。**(推荐)** |
| suro               | Netflix开源的java实现的分布式数据管道                        |
| riemann            | 用Clojure实现的网络事件流处理系统                            |

### 5. 安全

| 技术                            | 描述                                            |
| ------------------------------- | ----------------------------------------------- |
| OpenID Connect                  | 是一个以用户为中心的数字身份识别框架            |
| HMAC                            | 基于哈希的消息码                                |
| JSON Web Token                  |                                                 |
| ModSecurity                     | 一种应用程序防火墙                              |
| AppArmour、SELinux、GrSSecurity | 操作系统自带安全模块                            |
| Zed Attack Proxy                | 尝试重现对网站的恶意攻击                        |
| SimianArmy                      | Netflix开源的测试微服务系统健壮性工具**(推荐)** |

### 6. 文档

| 技术    | 描述                                                         |
| ------- | ------------------------------------------------------------ |
| Swagger | 一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务 |
| HAL     | 超文本应用程序语言                                           |

